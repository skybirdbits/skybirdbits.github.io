<!DOCTYPE html>
<html lang="fa">
<head>
    <meta content="ie=edge" http-equiv="x-ua-compatible"/>
    <meta content="برنامه نویسی کاتلین، اکستنشن فانکشن ، extension function ، extension property ، اکشتنشن پروپرتی ، برنامه نویسی تابعی، تابع اکستنشن، توابع اکستنشن، اکستنشن ها در کاتلین، توابع، توابع در کاتلین، اکستنشن پراپرتی"
          name="keywords"/>

    <meta content="در این مطلب به بررسی اکستنشن ها در کاتلین می پردازیم و با انوع اکستنشن از جمله تابع اکستنشن، اکستنشن پراپرتی، اکستنشن های Companion Object اشنا شده و تعریف اکستنشن ها در داخل کلاس رو بررسی میکنیم." name="description"/>
    <meta charset="UTF-8"/>
    <meta content="width:device-width, initial-scale=1" name="viewport"/>

    <title>اکستنشن ها در کاتلین</title>

    <meta property="og:title" content="اکستنشن ها در کاتلین"/>
    <meta property="og:description" content="در این مطلب به بررسی اکستنشن ها در کاتلین می پردازیم و با تابع اکستنشن، اکستنشن پراپرتی، اکستنشن های Companion Object اشنا شده و تعریف اکستنشن ها در داخل کلاس رو بررسی میکنیم."/>

    <meta property="og:image" content="https://skybirdbits.github.io/resources/favicon.png" />
    <meta property="og:url" content="https://skybirdbits.github.io/article/kotlin/extension-function.html" />
    <meta property="og:type" content="article">

    <link href="/resources/css/main.css" rel="stylesheet">
    <link href="/resources/favicon.png" rel="icon" type="image/x-icon">
    <script type="module" src="/resources/js/main.js"></script>


</head>
<body>

<header></header>

<main>

    <div class="page-wrap">
        <div class="article-head">
            <h1>
              اکستنشن ها در کاتلین
            </h1>

            <address>
                <a class="author text-muted text-decoration-none" rel="author">یونس سلیمانی</a>
            </address>

            <figure class="figure figure-wrapper">
                <img alt="تابع اکستنشن در کاتلین"
                     class="rounded figure-img"
                     src="/resources/image/kotlin/cover_extensions.png">
            </figure>


            <div class="toc">
                <p class="p-2 mx-2 h5">دسترسی سریع</p>
                <div class="list-group">
                    <a class="list-group-item list-group-item-action" href="#sub0">تعریف Extension در کاتلین</a>
                    <a class="list-group-item list-group-item-action" href="#sub1">تابع اکستنشن</a>
                    <a class="list-group-item list-group-item-action" href="#sub2">اکستنشن پراپرتی در کاتلین</a>
                    <a class="list-group-item list-group-item-action" href="#sub3">اکستنشن های Companion Object</a>
                    
                    <a class="list-group-item list-group-item-action" href="#sub4">تعریف اکستنشن به عنوان عضو یک کلاس</a>

                    <a class="list-group-item list-group-item-action" href="#sub5">خلاصه</a>
                </div>
            </div>

        </div>

        <article>


            <div id="sub0" class="subsection">
            <p class="title">
               تعریف Extension در کاتلین
            </p>

            <p>
                <blockquote>در این مطلب فرض شده با شی گرایی و توابع (متدها) در کاتلین آشنایی دارید. اگه با توابع در کاتلین اشنایی ندارید میتونید به مطلب <a class="text-decoration-none" href="/article/kotlin/functions.html">بررسی توابع در کاتلین</a> مراجعه کنید.</blockquote>
            </p>

            <p>اکستنشن ها در کاتلین توابع و متغیر هایی هستن که برای کلاس تعریفشون میکنیم.</p>

            <p>
            اکستنشن ها تغییری در داخل کلاس ایجاد نمیکنن و مانند پراپرتی (field) و تابع (function) های عضو کلاس اونا رو صدا میزنیم.
            </p>

            <p>با اینکه اکستنشن ها مانند اعضای کلاس صدا زده میشن اما عضوی به کلاس اضافه نمیکنن و <a class="text-decoration-none" href="/article/java/static-keyword.html">استاتیک</a> در نظر گرفته میشن. مثلا اگه برای دو کلاس تابع اکستنشن یکسان تعریف کرده باشیم، و دو کلاس از همدیگ ارث ببرن بدون توجه به وراثت؛ زمان کامپایل مشخص میشه تابع اکستنشن کدوم کلاس اجرا میشه.</p>


            <p>معمولا اکستنشن ها رو داخل فایل کاتلین؛ یعنی به صورت <a class="text-decoration-none" href="https://skybirdbits.github.io/article/kotlin/functions.html#sub8">Top Level</a> تعریف میکنیم.
            </p>

            <p>
            اکستنشن ها شامل توابع اکستنشن، اکستنشن پراپرتی (Extension Property)، و اکستنشن های Companion Object هستند.
            </p>

            </div>

                <div id="sub1" class="subsection">
            <p class="title">
              تابع اکستنشن
            </p>

            <p>
            به توابعی گفته میشه که برای یک کلاس، در خارج از کلاس تعریف میکنیم.
            </p>

            <p>
                فرم کلی:
            </p>

            <div class="code-container">
fun &lt;T&gt; MyClass&lt;T&gt;.myFunction(...){

    ....

}
            </div>


            <p>
                در اینجا MyClass اسم کلاس مورد نظر است یه نقطه میزاریم سپس اسم دلخواه برای تابعمون مینویسیم و مثل
                توابع معمولی پارامتر های دلخواه داخل پرانتز تابع رو تعریف میکنیم.
            </p>

            <p>
            همینطور اگه برای کلاس Generic تعریف شده بود مانند بالا میتونیم برای تابعی که تعریف میکنیم Generic تعریف کنیم تا برای هر نوع متغیری قابل استفاده باشه
            </p>

            <p>
                توابع اکستنشن رو مثل توابع عضو کلاس (ممبر فانکشن ها) صدا میزنیم.
            </p>

            <div class="code-container">
val myClass = MyClass&lt;T&gt;()
myClass.myFunction(...)
            </div>


            <div class="note">

              <p class="h6">
            نکته:
              </p>
              <p>
                 اگه تابع اکستنشن با یکی از توابع داخل کلاس از نظر پارامتر و اسم یکی باشه هنگام صدا زدن، تابع داخل کلاس به اجرا در میاد.
              </p>

            </div>

            <p>
                    مثال:
            </p>
            <p>یک function به کلاس String اضافه کردیم که بررسی میکنه یک String متقارن است یا خیر</p>

            <div class="code-container">
fun String.isPalindrome(): Boolean{
   return if (length &lt;= 1) true
    else if (this[0] != this[length -1]) false
    else substring(1, length -1).isPalindrome()
}

fun main(){
  val s0 = "moon"
  val s1 = "noon"
  val s2 = "abf"
  val s3 = "aba"

  println("is $s0 palindrome? ${s0.isPalindrome()}")
  println("is $s1 palindrome? ${s1.isPalindrome()}")
  println("is $s2 palindrome? ${s2.isPalindrome()}")
  println("is $s3 palindrome? ${s3.isPalindrome()}")
}
            </div>

            <p>مثال:</p>
            <p>اجرای تابع اکستنشن از دو کلاس پدر و فرزند.</p>

            <div class="code-container">
open class A { }

class ChildA: A() { }

fun A.printInfo(){
  println("An Extension for A")
}

fun ChildA.printInfo(){
  println("An Extension for ChildA")
}

fun show(a: A){
  a.printInfo()
}

fun main(){
  show(A())
  show(ChildA())
}    
            </div>
            <p>همینطور که در ابتدا گفتیم اکستنشن ها استاتیک در نظر گرفته میشن و زمان کامپایل مشخص میشه تابع کدوم کلاس اجرا بشه در بالا نتیجه اجرای تابع printInfo مربوط به A است. چون پارامتر show از نوع A است.</p>

            <p class="h5">استفاده از کلیدواژه ی this داخل تابع:</p>

            <p>
                 داخل تابع اکستنشن با کلید واژه ی this میتونیم به نمونه کلاس و اعضای کلاس دسترسی داشته باشیم.
            </p>

            <p>مثال:</p>

            <p>تابع swap رو برای MutableList هایی از نوع Int تعریف میکنیم.</p>
            
            <div class="code-container">
fun MutableList&lt;Int&gt;.swap(index1: Int, index2: Int) {
    val tmp = this[index1]
    this[index1] = this[index2]
    this[index2] = tmp
}
            </div>

            <p>این تابع برای هر MutableList که نوعش Int باشه قابل استفاده است.</p>

            <p>صدا زدن تابع:</p>

            <div class="code-container">
val list = mutableListOf(96, 78, 44)
list.swap(0, 2)
            </div>


            <p class="h5">تعریف تابع اکستنشن به صورت Generic:</p>

            <p>میتونیم توابع اکستنشن رو به صورت، جنریک تعریف کنیم.</p>

            <p>مثال:</p>

            <p>در زیر تابع swap رو به صورت جنریک تعریف کردیم تا برای هر نوعی قابل استفاده باشه.</p>


            <div class="code-container">
// &lt;T&gt; after function satisfies the generic.

fun &lt;T&gt; MutableList&lt;T&gt;.swap(index1: Int, index2: Int) {
    val tmp = this[index1]
    this[index1] = this[index2]
    this[index2] = tmp
}
            </div>


            </div>

            <div id="sub2" class="subsection">
            <p class="title">
                 اکستنشن پراپرتی در کاتلین
            </p>

            <p>
                فرم کلی:
            </p>

            <div class="code-container">
val &lt;T&gt; MyClass&lt;T&gt;.myProperty: Int
    get(){...}
            </div>

            <p>
            کاملا شبیه extension function هاست
            </p>
            <p>
            اکستنشن پروپرتی ها نمیتونن دارای مقدار اولیه باشن.
            </p>

            <p>
            همونطور که گفتیم extension ها ربطی به کلاس ندارن پس مقدار اولیه ای برای extension property ها وجود نداره
            </p>

            <p>
                مثال:
            </p>

            <div class="code-container">
val Int.even: Boolean get(){
    return this % 2 == 0
}

fun main(){
  val num0 = 24
  val num1 = 7

  println("is $num0 even? ${num0.even}")
  println("is $num1 even? ${num1.even}")
}
            </div>

            <p>
                در بالا یک property به کلاس Int اضافه کردیم که بررسی میکنه عدد زوجه یا نه.
            </p>
            </div>


            <div id="sub3" class="subsection">
            <p class="title">
                اکستنشن های Companion Object
            </p>


            <p>
                اگه برای یک کلاس Companion Object تعریف شده باشه، میتونیم برای Companion Object اکستنشن فانکشن و اکستنشن پراپرتی تعریف کنیم.
            </p>


            <div class="code-container">
MyClass.Companion.myFunction(){

//...

}
            </div>


            <p>
                برای صدا زدنش مثل بقیه اعضای داخل companion object عمل میکنیم:
            </p>


            <div class="code-container">
MyClass.myFunction()
            </div>

            </div>

            <div class="subsection" , id="sub4">
              <p class="title">تعریف اکستنشن به عنوان عضو یک کلاس
              </p>

              <div class="note">
                <p class="h6">توجه:</p>
                <p>
                برای مطالعه ی این بخش توصیه میشه با مبانی شی گرایی اشنایی داشته باشید.
                </p>
              </div>

              <p>میتونیم برای یک کلاس داخل کلاس دیگه اکستنشن تعریف کنیم به کلاسی که داخلش اکستنشن تعریف کردیم dispatch receiver و به کلاسی که اکستنشن رو براش تعریف کردیم extension receiver میگیم.</p>
              <p>مثال:</p>

              <p>استفاده از یک کلاس به عنوان extension receiver.</p>

              <div class="code-container">
class MyExtensionReceiver{               
  val id: Int = (0..100).random()

  fun printMessage(){
    println("This is a message from MyExtensionReceiver")
  }
}
              </div>

              <p>
              استفاده از یک کلاس به عنوان dispatch receiver.
              </p>

              <div class="code-container">
class MyDispatchReceiver(val er: MyExtensionReceiver){

  MyExtensionReceiver.printInfo(){
    println("The id of MyExtensionReceiver is $id")
  }

}
              </div>

              <div class="note">
                <p class="h6">توجه:</p>
                <p>اگه بخوایم داخل تابع printInfo یکی از اعضای dispatch receiver رو صدا بزنیم و با عضو extension receiver هم نام باشه، اولویت با اعضای extension receiver است. برای همین موقع صدا زدن اعضای dispatch receiver از <strong>this@ClassName</strong> استفاده میکنیم تا از تداخل اسمی جلوگیری بشه.</p>
              </div>

              <p>فرض کنید در کلاس MyDispatchReceiver عضوی با اسم id نیز وجود داشته باشه: </p>

              <div class="code-container">
class MyDispatchReceiver(val er: MyExtensionReceiver){
  val id: Int = (0..20).random()

  MyExtensionReceiver.printInfo(){
    val extensionId = id
    println("The id of MyExtensionReceiver is $id")
    val dispatchId = this@MyDispatchReceiver.id
    println("The id of MyDispatchReceiver is $dispatchId")

  }

}
              </div>

              <p>میتونیم تابع اکستنشن داخل کلاس رو به صورت open تعریف کنیم تا در وراثت بتونیم override کنیم.</p>

              <div class="note">
                <p class="h6">توجه:</p>
                تابع اکستنشن برای extension receiver و فرزندانش استاتیک و برای dispatcher receiver عضو به حساب میاد.
              </div>

              <p>
              مثال:
              </p>

              <div class="code-container">
open class A { }

class ChildA: A() { }

open class B {

  open fun A.printInfo(){
    println("An Extension function for A in B")
  }

  open fun ChildA.printInfo(){
    println("An Extension function for ChildA in B")
  }

  fun call(a: A){
    a.printInfo()
  }

}

class ChildB: B(){

  @override
  fun A.printInfo("An Extension function for A in ChildB") 

  @override
  fun ChildA.printInfo("An Extension function for ChildA in ChildB")

}

fun main() {
    
    val b = B()
    b.call(A())
    b.call(ChildA())

    val cb = ChildB()

    cb.call(A())
    cb.call(ChildA())
}
              </div>

              <p>ابتدا برای کلاس های A و ChildA تابع اکستنشن printInfo رو در B تعریف کردیم، سپس با ارث بری ChildB از B این دو تابع رو در ChildB بازنویسی کردیم، سپس در تابع main، تابع call رو صدا کردیم و نمونه جدید از A و ChildA رو به call پاس دادیم. چون پارامتر تعریف شده در  call از نوع A است، تابع printInfo برای A در B و ChildB اجرا میشه.</p>

            </div>

            <div id="sub5" class="subsection">

              <p class="title">خلاصه</p>

            <p>
                -در کاتلین Extension ها تاثیری روی کلاس ندارن وقتی برای یک کلاس extension تعریف میکنیم فقط بیان میکنیم که
                function یا property تعریف شده رو باید با استفاده از متغیر کلاس صدا بزنیم.
            </p>

            <p>
            -برای صدا زدن extension ها مانند اعضای داخل کلاس باید اسم متغیر کلاس نقطه و اسم function یا property تعریف شده رو بنویسیم.
            </p>


            <p>
                در قطعه کد زیر به طور خلاصه از هر سه نوع یک نمونه بیان شده است:
            </p>


            <div class="code-container">
//Extension Function
fun MyClass.myExtensionFunction(){
    //...
}

//Extension Property
val MyClass.myExtensionProperty: List&lt;String&gt; get(){
    //...
}

//Companion object extension
fun MyClass.Companion.myExtensionCompanionFunction(){
    //...
}

val myObject = MyClass()

myObject.myExtensionFunction()

val list = myObject.myExtensionProperty

MyClass.myExtensionCompanionFunction()
            </div>

            </div>

            <p>
            در این مطلب به بررسی اکستنشن ها در کاتلین پرداختیم و با توابع اکستنشن ، اکستنشن پراپرتی  و اکستنشن های companion object اشنا شدیم و اکستنشن های عضو کلاس رو بررسی کردیم.
            </p>

            <p>موفق باشید</p>

        </article>
        <div class="article-foot">
            <div class="d-block">
                <p class="h5">مطالب مرتبط:</p>
                <div class="d-flex flex-wrap">

                    <span class="p-2">
                        <a class="text-decoration-none" href="/article/kotlin/functions.html">بررسی توابع در کاتلین</a>
                    </span>
                    <span class="p-2">
                        <a class="text-decoration-none" href="/article/kotlin/anonymous-function-and-lambda.html">توابع بی نام و عبارت لاندا در کاتلین</a>
                    </span>

                    <span class="p-2">
                        <a class="text-decoration-none" href="/article/kotlin/higher-order-functions.html">توابع مرتبه بالا در کاتلین</a>
                    </span>

                    <span class="p-2">
                      <a href="/article/kotlin/selectors.html" class="text-decoration-none">عبارت شرطی در کاتلین</a>
                    </span>

                    <span class="p-2">
                        <a class="text-decoration-none" href="/article/kotlin/loops.html">حلقه (Loop) ها در کاتلین</a>
                    </span>

                    <span class="p-2">
                        <a class="text-decoration-none" href="/article/java/static-keyword.html">کلیدواژه ی استاتیک در جاوا</a>
                    </span>
                    <span class="p-2">
                      <a class="text-decoration-none" href="https://kotlinlang.org/docs/extensions.html">مطالعه در سایت رسمی کاتلین</a>
                    </span>
                </div>
            </div>
        </div>

    </div>

</main>

<div class="scroll-top-container">
    <a class="text-decoration-none link-dark material-icons" href="#top">
        arrow_drop_up
    </a>
</div>

<footer></footer>

<div class="copy-message">
    <span class="copy-message-text">کپی شد!</span>
</div>

</body>
</html>
